---
title: "user_interface"
output: html_document
runtime: shiny
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Inputs and Outputs

Term groups are comma deliminated, and newline separated
For example:
```{text}
foo, bar
foobie
is interpreted as
("foo" OR "bar") AND ("foobie")
```

Just a button that executes a hard coded ERIC search query, which is then displayed below

```{r eruptions, echo=FALSE}
library(stringr)
# search_terms is the string input from the terms_input textArea
format_terms_input <- function(search_terms) {
  term_groups <- t(str_split(search_terms, '\n', simplify = TRUE))
  terms_list <- mapply(function(x) {str_split(x, ',', simplify = TRUE)}, term_groups)

  return(terms_list)
}

inputPanel(
  textAreaInput("terms_input", "Search", rows = 3,
                value = "FAA, Part 147\ndistance learning, online education"),
  actionButton("display_button", "Display terms")
)
verbatimTextOutput("terms_output", placeholder = TRUE)

display_button_event <- eventReactive(input$display_button, {
  # working simple text display
  # paste(
  #   "terms:\n", input$terms_input,
  #   "First newline found at: ", str_locate(input$terms_input, "\n"),
  #   "\n"
  # )
  return(format_terms_input(input$terms_input))
})

library(stringr)

output$terms_output <- renderText({
  display_button_event()
})
```

## Visualizations

Ideas for helpful graphs:

* venn diagram
* flame chart
* something interactive? checkbox matrix?
* tree breakdown
