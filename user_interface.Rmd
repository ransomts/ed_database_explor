---
title: "user_interface"
output: html_document
runtime: shiny
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Inputs and Outputs

Just a button that executes a hard coded ERIC search query, which is then displayed below

```{r eruptions, echo=FALSE}

inputPanel(
  textAreaInput("terms_input", "Search", rows = 3,
                value = "FAA, Part 147;\ndistance learning, online education"),
  actionButton("display_button", "Display terms")
)
verbatimTextOutput("terms_output", placeholder = TRUE)

format_term_input <- eventReactive(input$display_button, {
  # TODO: Remove leading spaces from split inputs (More info below)
  
  # We split the string on new lines then pass the array of split strings to mapply which splits each line on commas
  split_input <- mapply(strsplit, strsplit(input$terms_input, '\n'), MoreArgs = list(split = ','))
  
  # We then combine the split strings with ORs on the same line and each line separated with ANDs
  # When we combine with ORs it produces a double space. This is because we're splitting on comma without the following space.
  # This could be changed if we want to disallow commas without spaces after or we could trim the spaces after.
  paste(
    "terms: ", paste(mapply(paste, split_input, MoreArgs = list(collapse = " OR ")), collapse = " AND ")
  )
})

library(stringr)

output$terms_output <- renderText({
  format_term_input()
})
```


